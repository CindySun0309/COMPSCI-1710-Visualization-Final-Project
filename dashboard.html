<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Luxury Prototype V1 — Hermès, Gucci, Coach</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/d3@7"></script>
  <style>
    :root{
      --maxw: 1100px; --pad: 28px; --bg:#0b1020; --ink:#e8ebff; --muted:#9aa3c1; --brand1:#7dd3fc; --brand2:#fda4af; --brand3:#a7f3d0; --accent:#ffd166;
    }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;background:var(--bg);color:var(--ink);font-family:Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;}
    header.hero{position:relative;padding:84px 20px 40px;border-bottom:1px solid #1f2543;background:radial-gradient(1200px 600px at 50% -10%, #1a2150 0%, rgba(26,33,80,0) 60%);} 
    .hero h1{max-width:var(--maxw);margin:0 auto;font-size:clamp(28px, 3.2vw, 44px);line-height:1.15;font-weight:800;letter-spacing:-0.01em}
    .hero p.kicker{max-width:var(--maxw);margin:16px auto 0;color:var(--muted);font-size:clamp(14px,1.6vw,18px)}
    nav.top{position:sticky;top:0;z-index:10;background:rgba(11,16,32,0.8);backdrop-filter: blur(6px);border-bottom:1px solid #1f2543;}
    nav.top .wrap{display:flex;gap:18px;max-width:var(--maxw);margin:0 auto;padding:10px 20px;align-items:center}
    nav.top a{padding:8px 12px;border-radius:10px;color:var(--muted);font-weight:600;text-decoration:none}
    nav.top a.active{color:var(--ink);background:#1a2150}
    main{max-width:var(--maxw);margin:0 auto;padding:20px}
    section{padding:48px 0;border-bottom:1px solid #1f2543}
    section:last-of-type{border-bottom:none}
    h2{font-size:clamp(22px,2.2vw,30px);margin:0 0 12px 0}
    p{color:#cfd6ff;line-height:1.6}
    .two-col{display:grid;grid-template-columns:1.2fr 1fr;gap:24px}
    .card{border:1px solid #263067;border-radius:16px;padding:var(--pad);background:linear-gradient(180deg, rgba(21,27,64,0.6), rgba(21,27,64,0.2));}
    .viz{width:100%;height:380px}
    footer{color:var(--muted);padding:40px 20px;text-align:center}
    #insights {
      padding-top: 24px;
      padding-bottom: 16px;
    }

    .facet {
      margin-top: 10px;
      margin-bottom: 16px;
    }
    .viz:empty { display: none; }   /* kills the 380px when nothing is inside */



  </style>
</head>
<body>
  <header class="hero">
    <h1>Luxury is not monolithic. Hermès, Gucci, and Coach represent distinct models of prestige that differ in pricing, consumer engagement, and global reach.</h1>
    <p class="kicker">Scroll to explore Hook → Rising Insights → Main Message → Solution</p>
  </header>

  <main>
    <section id="hook"><h2>Hook</h2><div id="viz-revenue-line" class="viz"></div></section>

    <section id="insights"><h2>Rising Insights</h2><div id="viz-price-hist" class="viz"></div></section>




    <section id="message"><h2>Main Message</h2></section>

    <section id="solution"><h2>Solution</h2></section>
  </main>

  <footer>Process book & team credits © 2025</footer>

<script>
  d3.csv("data/region_category_clean_data.csv").then(data => {
    console.log("Loaded dataset:", data.slice(0, 5));

    // clean types
    data.forEach(d => {
      d.year = +d.year;
      d.millions_of_euros = +d.millions_of_euros;
    });

    // filter out NAs
    data = data.filter(d => d.category && d.category !== "NA");

    // === simple ggplot-style faceted line charts ===
    const brands = ["Hermes", "Gucci", "Coach"];
  const container = d3.select("#insights").selectAll(".facet")
    .data(brands)
    .join("div")
    .attr("class", "facet")
    .style("margin-bottom", "40px");

  
  container.each(function(brand) {
  const brandData = data.filter(d => d.brand === brand && d.category && d.category !== "NA");

  // color palette by brand
  const categories = Array.from(new Set(brandData.map(d => d.category)));
  let palette;
  if (brand === "Hermes") palette = d3.schemeSet2;
  else if (brand === "Gucci") palette = d3.schemeTableau10;
  else palette = d3.schemePastel1;

  const color = d3.scaleOrdinal().domain(categories).range(palette);

  // wrapper with two columns (line + bar)
  const wrapper = d3.select(this)
    .append("div")
    .style("display", "flex")
    .style("align-items", "flex-start")
    .style("gap", "30px");

  // === Line Chart ===
  const width = 800, height = 350;
  const margin = { top: 16, right: 180, bottom: 40, left: 70 };

  const svg = wrapper.append("svg")
    .attr("width", width)
    .attr("height", height);

  const g = svg.append("g")
    .attr("transform", `translate(${margin.left},${margin.top})`);

  const innerW = width - margin.left - margin.right;
  const innerH = height - margin.top - margin.bottom;

  const years = Array.from(new Set(brandData.map(d => +d.year))).sort(d3.ascending);
  const x = d3.scalePoint().domain(years).range([0, innerW]).padding(0.3);
  const y = d3.scaleLinear()
    .domain([0, d3.max(brandData, d => d.millions_of_euros) * 1.05])
    .nice()
    .range([innerH, 0]);

  g.append("g")
    .attr("transform", `translate(0,${innerH})`)
    .call(d3.axisBottom(x).tickValues(years));
  g.append("g").call(d3.axisLeft(y).ticks(6));

  const line = d3.line()
    .x(d => x(d.year))
    .y(d => y(d.millions_of_euros))
    .curve(d3.curveLinear);

  const grouped = d3.groups(brandData, d => d.category);
  g.selectAll(".cat-line")
    .data(grouped)
    .join("path")
    .attr("fill", "none")
    .attr("stroke", d => color(d[0]))
    .attr("stroke-width", 2.5)
    .attr("d", d => line(d[1].sort((a,b)=>d3.ascending(a.year,b.year))));

  svg.append("text")
    .attr("x", width / 2)
    .attr("y", 16)
    .attr("text-anchor", "middle")
    .attr("fill", "#e8ebff")
    .attr("font-size", "20px")
    .attr("font-weight", "800")
    .text(`${brand} — Revenue by Category`);

  // legend
  const legend = svg.append("g")
    .attr("transform", `translate(${margin.left + innerW + 25},${margin.top})`);
  legend.selectAll("rect")
    .data(categories)
    .join("rect")
      .attr("x", 0)
      .attr("y", (d, i) => i * 18)
      .attr("width", 10)
      .attr("height", 10)
      .attr("fill", d => color(d));
  legend.selectAll("text")
    .data(categories)
    .join("text")
      .attr("x", 16)
      .attr("y", (d, i) => i * 18 + 9)
      .attr("fill", "#cfd6ff")
      .style("font-size", "11px")
      .text(d => d);

  // === Barplot area ===
  const barDiv = wrapper.append("div")
    .attr("class", "barplot")
    .style("width", "420px")
    .style("height", "350px");

  // === Click interaction ===
  svg.on("click", (event) => {
    const [mx] = d3.pointer(event);
    const closestYear = years.reduce((a, b) =>
      Math.abs(x(a) - mx) < Math.abs(x(b) - mx) ? a : b
    );

    g.selectAll(".year-line").remove();
    g.append("line")
      .attr("class", "year-line")
      .attr("x1", x(closestYear))
      .attr("x2", x(closestYear))
      .attr("y1", 0)
      .attr("y2", innerH)
      .attr("stroke", "#ffd166")
      .attr("stroke-width", 2)
      .attr("stroke-dasharray", "4 2");

    drawBarplot(brand, closestYear, barDiv, color);
  });

  // start with most recent year
  drawBarplot(brand, d3.max(years), barDiv, color);

  function drawBarplot(brand, year, container, color) {
  container.selectAll("*").remove();

  const filtered = data.filter(d => d.brand === brand && d.year === year && d.category && d.category !== "NA");
  if (!filtered.length) return;

  const width = 420, height = 350;
  const margin = { top: 30, right: 40, bottom: 30, left: 130 };

  const svg = container.append("svg")
    .attr("width", width)
    .attr("height", height);

  const g = svg.append("g")
    .attr("transform", `translate(${margin.left},${margin.top})`);

  const innerW = width - margin.left - margin.right;
  const innerH = height - margin.top - margin.bottom;

  const x = d3.scaleLinear()
    .domain([0, d3.max(filtered, d => d.millions_of_euros) * 1.1])
    .range([0, innerW]);

  const y = d3.scaleBand()
    .domain(filtered.map(d => d.category))
    .range([0, innerH])
    .padding(0.25);

  // Bars
  g.selectAll(".bar")
    .data(filtered, d => d.category)
    .join(
      enter => enter.append("rect")
        .attr("class", "bar")
        .attr("y", d => y(d.category))
        .attr("height", y.bandwidth())
        .attr("x", 0)
        .attr("width", 0)
        .attr("fill", d => color(d.category))
        .call(enter => enter.transition().duration(600)
          .attr("width", d => x(d.millions_of_euros))),
      update => update.transition().duration(600)
        .attr("width", d => x(d.millions_of_euros))
    );

  // Labels
  g.selectAll(".label")
    .data(filtered, d => d.category)
    .join("text")
      .attr("x", d => x(d.millions_of_euros) + 5)
      .attr("y", d => y(d.category) + y.bandwidth() / 1.6)
      .attr("fill", "#e8ebff")
      .attr("font-size", "11px")
      .text(d => d3.format(".1f")(d.millions_of_euros));

  // Axes
  g.append("g").call(d3.axisLeft(y).tickSize(0)).selectAll("text").attr("fill", "#cfd6ff");
  g.append("g")
    .attr("transform", `translate(0,${innerH})`)
    .call(d3.axisBottom(x).ticks(4))
    .selectAll("text")
    .attr("fill", "#cfd6ff");

  // Title
  svg.append("text")
    .attr("x", width / 2)
    .attr("y", 18)
    .attr("text-anchor", "middle")
    .attr("fill", "#e8ebff")
    .attr("font-size", "14px")
    .attr("font-weight", "700")
    .text(`${brand} — ${year} Category Breakdown`);
}


});


});
</script>


</body>
</html>
